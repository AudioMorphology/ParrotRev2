<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Parrot: F:/Dev/Parrot/parrot_core1.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Parrot
   </div>
   <div id="projectbrief">Eurorack clock-able delay based on the RPi Pico</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('parrot__core1_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">parrot_core1.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="parrot_8h_source.html">parrot.h</a>&quot;</code><br />
<code>#include &quot;pico/stdlib.h&quot;</code><br />
<code>#include &quot;pico/multicore.h&quot;</code><br />
<code>#include &quot;hardware/irq.h&quot;</code><br />
<code>#include &quot;hardware/adc.h&quot;</code><br />
<code>#include &quot;hardware/sync.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe21adbf567c42a41a4709480efb2125" id="r_afe21adbf567c42a41a4709480efb2125"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe21adbf567c42a41a4709480efb2125">checkRotaryEncoder</a> ()</td></tr>
<tr class="memdesc:afe21adbf567c42a41a4709480efb2125"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotary Encoder finite state machine.  <br /></td></tr>
<tr class="separator:afe21adbf567c42a41a4709480efb2125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e3dbe6039c9461b397296f63ff685a" id="r_a66e3dbe6039c9461b397296f63ff685a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a66e3dbe6039c9461b397296f63ff685a">encoder_IRQ_handler</a> (uint gpio, uint32_t events)</td></tr>
<tr class="memdesc:a66e3dbe6039c9461b397296f63ff685a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotary Encoder IRQ callback.  <br /></td></tr>
<tr class="separator:a66e3dbe6039c9461b397296f63ff685a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9b9a3be6c4b6075d04de40a2e21978" id="r_a1e9b9a3be6c4b6075d04de40a2e21978"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e9b9a3be6c4b6075d04de40a2e21978">clock_callback</a> (uint gpio, uint32_t events)</td></tr>
<tr class="memdesc:a1e9b9a3be6c4b6075d04de40a2e21978"><td class="mdescLeft">&#160;</td><td class="mdescRight">event handler for the incoming clock IRQ this is normalled from the internal clock via the external clock input jack.  <br /></td></tr>
<tr class="separator:a1e9b9a3be6c4b6075d04de40a2e21978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e230a526ff7bad3762a9c5b6683b4a" id="r_a54e230a526ff7bad3762a9c5b6683b4a"><td class="memItemLeft" align="right" valign="top"><a id="a54e230a526ff7bad3762a9c5b6683b4a" name="a54e230a526ff7bad3762a9c5b6683b4a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>updateFeedback</b> ()</td></tr>
<tr class="memdesc:a54e230a526ff7bad3762a9c5b6683b4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">check the Feedback Pot ADC input and update the global Feedback amount parameters. This updates a moving average figure to try and eliminate or at least reduce the noise on the ADC input <br /></td></tr>
<tr class="separator:a54e230a526ff7bad3762a9c5b6683b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aface0710712eeff3c3721b361e2db58f" id="r_aface0710712eeff3c3721b361e2db58f"><td class="memItemLeft" align="right" valign="top"><a id="aface0710712eeff3c3721b361e2db58f" name="aface0710712eeff3c3721b361e2db58f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>updateClock</b> ()</td></tr>
<tr class="memdesc:aface0710712eeff3c3721b361e2db58f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the Clock Pot ADC input and updates the global Internal Clock Speed. This updates a moving average figure to try and eliminate or at least reduce the noise on the ADC input. <br /></td></tr>
<tr class="separator:aface0710712eeff3c3721b361e2db58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a528ed956aa0bf0eb015345d61b65b0f7" id="r_a528ed956aa0bf0eb015345d61b65b0f7"><td class="memItemLeft" align="right" valign="top"><a id="a528ed956aa0bf0eb015345d61b65b0f7" name="a528ed956aa0bf0eb015345d61b65b0f7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>updateWetDry</b> ()</td></tr>
<tr class="memdesc:a528ed956aa0bf0eb015345d61b65b0f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">check the value of the wet/dry pot and update the global Wet and Dry values. Raw values are run through a moving average buffer in order to reduce noise <br /></td></tr>
<tr class="separator:a528ed956aa0bf0eb015345d61b65b0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338c99b4dbf199068448188044386c98" id="r_a338c99b4dbf199068448188044386c98"><td class="memItemLeft" align="right" valign="top"><a id="a338c99b4dbf199068448188044386c98" name="a338c99b4dbf199068448188044386c98"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>updateAlgorithm</b> ()</td></tr>
<tr class="memdesc:a338c99b4dbf199068448188044386c98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the state of the Algorithm pins - two pins generate a 2-bit value, which is used to switch between the 4 different delay / reverb algorithms. <br /></td></tr>
<tr class="separator:a338c99b4dbf199068448188044386c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a091d72b469ffc1b89417b1b028f1817d" id="r_a091d72b469ffc1b89417b1b028f1817d"><td class="memItemLeft" align="right" valign="top"><a id="a091d72b469ffc1b89417b1b028f1817d" name="a091d72b469ffc1b89417b1b028f1817d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>updateDivisor</b> ()</td></tr>
<tr class="memdesc:a091d72b469ffc1b89417b1b028f1817d"><td class="mdescLeft">&#160;</td><td class="mdescRight">read the 4-Bit BCD value from the Divisor switch, read the appropriate Divisor (multiple of the clock period) and set the global divisor value accordingly <br /></td></tr>
<tr class="separator:a091d72b469ffc1b89417b1b028f1817d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f153132b8b4afad133b952111e18bd9" id="r_a9f153132b8b4afad133b952111e18bd9"><td class="memItemLeft" align="right" valign="top"><a id="a9f153132b8b4afad133b952111e18bd9" name="a9f153132b8b4afad133b952111e18bd9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>core1_entry</b> ()</td></tr>
<tr class="memdesc:a9f153132b8b4afad133b952111e18bd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">core1 entry point called from <a class="el" href="parrot__main_8c.html">parrot_main.c</a> <br /></td></tr>
<tr class="separator:a9f153132b8b4afad133b952111e18bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2995461f3105afc9f13934cd5c0734b2" id="r_a2995461f3105afc9f13934cd5c0734b2"><td class="memItemLeft" align="right" valign="top"><a id="a2995461f3105afc9f13934cd5c0734b2" name="a2995461f3105afc9f13934cd5c0734b2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>temp</b> = false</td></tr>
<tr class="separator:a2995461f3105afc9f13934cd5c0734b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d85354add3da5b36ae9b723319e470d" id="r_a7d85354add3da5b36ae9b723319e470d"><td class="memItemLeft" align="right" valign="top"><a id="a7d85354add3da5b36ae9b723319e470d" name="a7d85354add3da5b36ae9b723319e470d"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>ClockBPM</b></td></tr>
<tr class="separator:a7d85354add3da5b36ae9b723319e470d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af392689b714f6ba2458634956905a640" id="r_af392689b714f6ba2458634956905a640"><td class="memItemLeft" align="right" valign="top"><a id="af392689b714f6ba2458634956905a640" name="af392689b714f6ba2458634956905a640"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>ClockFreq</b></td></tr>
<tr class="separator:af392689b714f6ba2458634956905a640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc80d622ccf90a4f002f559087b51477" id="r_abc80d622ccf90a4f002f559087b51477"><td class="memItemLeft" align="right" valign="top"><a id="abc80d622ccf90a4f002f559087b51477" name="abc80d622ccf90a4f002f559087b51477"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>ClockPeriod</b></td></tr>
<tr class="separator:abc80d622ccf90a4f002f559087b51477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a299b0c1a22a31c7bb56e2e838302a" id="r_a15a299b0c1a22a31c7bb56e2e838302a"><td class="memItemLeft" align="right" valign="top"><a id="a15a299b0c1a22a31c7bb56e2e838302a" name="a15a299b0c1a22a31c7bb56e2e838302a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ClockPhase</b></td></tr>
<tr class="separator:a15a299b0c1a22a31c7bb56e2e838302a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c4ddc42fbe37f0df788373e2300d83" id="r_a37c4ddc42fbe37f0df788373e2300d83"><td class="memItemLeft" align="right" valign="top"><a id="a37c4ddc42fbe37f0df788373e2300d83" name="a37c4ddc42fbe37f0df788373e2300d83"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>LEDPhase</b></td></tr>
<tr class="separator:a37c4ddc42fbe37f0df788373e2300d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409569c38131b65358f7c2f1904d7fd5" id="r_a409569c38131b65358f7c2f1904d7fd5"><td class="memItemLeft" align="right" valign="top"><a id="a409569c38131b65358f7c2f1904d7fd5" name="a409569c38131b65358f7c2f1904d7fd5"></a>
_Atomic int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>ExtClockPeriod</b></td></tr>
<tr class="separator:a409569c38131b65358f7c2f1904d7fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c06bde7e13d38fcc6f6ade5119e1d7" id="r_a25c06bde7e13d38fcc6f6ade5119e1d7"><td class="memItemLeft" align="right" valign="top"><a id="a25c06bde7e13d38fcc6f6ade5119e1d7" name="a25c06bde7e13d38fcc6f6ade5119e1d7"></a>
_Atomic int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>ExtClockTick</b></td></tr>
<tr class="separator:a25c06bde7e13d38fcc6f6ade5119e1d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff5f28ce7b6ef6ee218406651aef3982" id="r_aff5f28ce7b6ef6ee218406651aef3982"><td class="memItemLeft" align="right" valign="top"><a id="aff5f28ce7b6ef6ee218406651aef3982" name="aff5f28ce7b6ef6ee218406651aef3982"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><b>SyncFree</b></td></tr>
<tr class="separator:aff5f28ce7b6ef6ee218406651aef3982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf219ac4e7b65a1c13392b550d50b292" id="r_abf219ac4e7b65a1c13392b550d50b292"><td class="memItemLeft" align="right" valign="top"><a id="abf219ac4e7b65a1c13392b550d50b292" name="abf219ac4e7b65a1c13392b550d50b292"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>Feedback_MA</b> [16]</td></tr>
<tr class="separator:abf219ac4e7b65a1c13392b550d50b292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1457edccd8a0ef774539a9197af1ca" id="r_acc1457edccd8a0ef774539a9197af1ca"><td class="memItemLeft" align="right" valign="top"><a id="acc1457edccd8a0ef774539a9197af1ca" name="acc1457edccd8a0ef774539a9197af1ca"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><b>Feedback_MA_Ptr</b></td></tr>
<tr class="separator:acc1457edccd8a0ef774539a9197af1ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219dd3f426e590eb37bf82d867e5a1ca" id="r_a219dd3f426e590eb37bf82d867e5a1ca"><td class="memItemLeft" align="right" valign="top"><a id="a219dd3f426e590eb37bf82d867e5a1ca" name="a219dd3f426e590eb37bf82d867e5a1ca"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>Feedback_Average</b></td></tr>
<tr class="separator:a219dd3f426e590eb37bf82d867e5a1ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad179f0b4748815cc6dbdb343939b6538" id="r_ad179f0b4748815cc6dbdb343939b6538"><td class="memItemLeft" align="right" valign="top"><a id="ad179f0b4748815cc6dbdb343939b6538" name="ad179f0b4748815cc6dbdb343939b6538"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>Feedback_MA_Sum</b></td></tr>
<tr class="separator:ad179f0b4748815cc6dbdb343939b6538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b15135a7179556546e3f9d75a66bab5" id="r_a5b15135a7179556546e3f9d75a66bab5"><td class="memItemLeft" align="right" valign="top"><a id="a5b15135a7179556546e3f9d75a66bab5" name="a5b15135a7179556546e3f9d75a66bab5"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>Clock_MA</b> [16]</td></tr>
<tr class="separator:a5b15135a7179556546e3f9d75a66bab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa37d5e4c98e7790f72e86b2364fedec0" id="r_aa37d5e4c98e7790f72e86b2364fedec0"><td class="memItemLeft" align="right" valign="top"><a id="aa37d5e4c98e7790f72e86b2364fedec0" name="aa37d5e4c98e7790f72e86b2364fedec0"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><b>Clock_MA_Ptr</b></td></tr>
<tr class="separator:aa37d5e4c98e7790f72e86b2364fedec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f932f0a9ca0bd6d74ede39568d563f" id="r_a06f932f0a9ca0bd6d74ede39568d563f"><td class="memItemLeft" align="right" valign="top"><a id="a06f932f0a9ca0bd6d74ede39568d563f" name="a06f932f0a9ca0bd6d74ede39568d563f"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>Clock_Average</b></td></tr>
<tr class="separator:a06f932f0a9ca0bd6d74ede39568d563f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a824a68bf2a03007d1e6b37c86c0adb" id="r_a3a824a68bf2a03007d1e6b37c86c0adb"><td class="memItemLeft" align="right" valign="top"><a id="a3a824a68bf2a03007d1e6b37c86c0adb" name="a3a824a68bf2a03007d1e6b37c86c0adb"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>Clock_MA_Sum</b></td></tr>
<tr class="separator:a3a824a68bf2a03007d1e6b37c86c0adb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6065925df36ccf0651c7de04504b70c" id="r_ad6065925df36ccf0651c7de04504b70c"><td class="memItemLeft" align="right" valign="top"><a id="ad6065925df36ccf0651c7de04504b70c" name="ad6065925df36ccf0651c7de04504b70c"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>WetDry_MA</b> [16]</td></tr>
<tr class="separator:ad6065925df36ccf0651c7de04504b70c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b48615d3c25daf1379295b4dfc6f9a" id="r_a56b48615d3c25daf1379295b4dfc6f9a"><td class="memItemLeft" align="right" valign="top"><a id="a56b48615d3c25daf1379295b4dfc6f9a" name="a56b48615d3c25daf1379295b4dfc6f9a"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><b>WetDry_MA_Ptr</b></td></tr>
<tr class="separator:a56b48615d3c25daf1379295b4dfc6f9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac0f62fd26a778720aba9d7c1c6ad33" id="r_aaac0f62fd26a778720aba9d7c1c6ad33"><td class="memItemLeft" align="right" valign="top"><a id="aaac0f62fd26a778720aba9d7c1c6ad33" name="aaac0f62fd26a778720aba9d7c1c6ad33"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>WetDry_Average</b></td></tr>
<tr class="separator:aaac0f62fd26a778720aba9d7c1c6ad33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4faa5c4a10babdbbfd1c2be2ede64a0b" id="r_a4faa5c4a10babdbbfd1c2be2ede64a0b"><td class="memItemLeft" align="right" valign="top"><a id="a4faa5c4a10babdbbfd1c2be2ede64a0b" name="a4faa5c4a10babdbbfd1c2be2ede64a0b"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>WetDry_MA_Sum</b></td></tr>
<tr class="separator:a4faa5c4a10babdbbfd1c2be2ede64a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7f48816d599dac57701e8209d217857" id="r_ab7f48816d599dac57701e8209d217857"><td class="memItemLeft" align="right" valign="top"><a id="ab7f48816d599dac57701e8209d217857" name="ab7f48816d599dac57701e8209d217857"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>ExtClock_MA</b> [16]</td></tr>
<tr class="separator:ab7f48816d599dac57701e8209d217857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76d9a51e0e19ff5dc32880b9ca9ba43" id="r_ad76d9a51e0e19ff5dc32880b9ca9ba43"><td class="memItemLeft" align="right" valign="top"><a id="ad76d9a51e0e19ff5dc32880b9ca9ba43" name="ad76d9a51e0e19ff5dc32880b9ca9ba43"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><b>ExtClock_MA_Ptr</b></td></tr>
<tr class="separator:ad76d9a51e0e19ff5dc32880b9ca9ba43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7519e6a9b82164f8a22992fceaef27d4" id="r_a7519e6a9b82164f8a22992fceaef27d4"><td class="memItemLeft" align="right" valign="top"><a id="a7519e6a9b82164f8a22992fceaef27d4" name="a7519e6a9b82164f8a22992fceaef27d4"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>ExtClock_Average</b></td></tr>
<tr class="separator:a7519e6a9b82164f8a22992fceaef27d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ddc2e887189d12bdfca493a63ccc022" id="r_a9ddc2e887189d12bdfca493a63ccc022"><td class="memItemLeft" align="right" valign="top"><a id="a9ddc2e887189d12bdfca493a63ccc022" name="a9ddc2e887189d12bdfca493a63ccc022"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>ExtClock_MA_Sum</b></td></tr>
<tr class="separator:a9ddc2e887189d12bdfca493a63ccc022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24c48207272f896c8db10af544391fce" id="r_a24c48207272f896c8db10af544391fce"><td class="memItemLeft" align="right" valign="top"><a id="a24c48207272f896c8db10af544391fce" name="a24c48207272f896c8db10af544391fce"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>lrmem</b> = 3</td></tr>
<tr class="separator:a24c48207272f896c8db10af544391fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0e2866b37580f900076a038bee5aa5" id="r_a7d0e2866b37580f900076a038bee5aa5"><td class="memItemLeft" align="right" valign="top"><a id="a7d0e2866b37580f900076a038bee5aa5" name="a7d0e2866b37580f900076a038bee5aa5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lrsum</b> = 0</td></tr>
<tr class="separator:a7d0e2866b37580f900076a038bee5aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92b43dc95043cb23dab3ca60efc0e6dc" id="r_a92b43dc95043cb23dab3ca60efc0e6dc"><td class="memItemLeft" align="right" valign="top"><a id="a92b43dc95043cb23dab3ca60efc0e6dc" name="a92b43dc95043cb23dab3ca60efc0e6dc"></a>
int8_t&#160;</td><td class="memItemRight" valign="bottom"><b>TRANS</b> [] = {0, -1, 1, 14, 1, 0, 14, -1, -1, 14, 0, 1, 14, 1, -1, 0}</td></tr>
<tr class="separator:a92b43dc95043cb23dab3ca60efc0e6dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains all functions that run on the second core of the Pico (Core1) These are primarily the internal and external clock routines and the less time-critical user interface routines</p>
<p>In general global variables are set by routines in parrot_core1, then read and acted upon by the time-critical functions in parrot_main </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afe21adbf567c42a41a4709480efb2125" name="afe21adbf567c42a41a4709480efb2125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe21adbf567c42a41a4709480efb2125">&#9670;&#160;</a></span>checkRotaryEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t checkRotaryEncoder </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rotary Encoder finite state machine. </p>
<p>This comes from a technical paper by Marko Pinteric <a href="https://www.pinteric.com/rotary.html">https://www.pinteric.com/rotary.html</a>, with additions by Ralph S. Bacon <a href="https://github.com/RalphBacon/226-Better-Rotary-Encoder&mdash;no-switch-bounce">https://github.com/RalphBacon/226-Better-Rotary-Encoder&amp;mdash;no-switch-bounce</a> </p>

</div>
</div>
<a id="a1e9b9a3be6c4b6075d04de40a2e21978" name="a1e9b9a3be6c4b6075d04de40a2e21978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e9b9a3be6c4b6075d04de40a2e21978">&#9670;&#160;</a></span>clock_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clock_callback </td>
          <td>(</td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>gpio</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>event handler for the incoming clock IRQ this is normalled from the internal clock via the external clock input jack. </p>
<p>should be triggered on both the rising and falling edges </p>

</div>
</div>
<a id="a66e3dbe6039c9461b397296f63ff685a" name="a66e3dbe6039c9461b397296f63ff685a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66e3dbe6039c9461b397296f63ff685a">&#9670;&#160;</a></span>encoder_IRQ_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void encoder_IRQ_handler </td>
          <td>(</td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>gpio</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rotary Encoder IRQ callback. </p>
<p>In Free-running mode (ie sync'd to the internal or external clock) this increases or decreases the targetDelay, which is the delay that the glbDelay value is aiming for, but ony moving towards by one sample at a time.</p>
<p>The larger the target delay, the larger the increment and therefore the lower the resolution </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c129155e216b31587ee8737f52b704ce.html">Parrot</a></li><li class="navelem"><a class="el" href="parrot__core1_8c.html">parrot_core1.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
